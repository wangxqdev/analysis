Configuration:
  status: info
  name: log4j2
  monitorInterval: 30
  properties:
    property:
      - name: log.home
        value: data/logs
      - name: log.file.name
        value: analysis
  thresholdFilter:
    level: info
  appenders:
    Console:
      name: STDOUT
      PatternLayout:
        Pattern: "%d{yyyy.MM.dd HH:mm:ss.SSS} [%t] %-5level %logger{36} %L %M - %msg%xEx%n"
        Charset: "UTF-8"
    RollingRandomAccessFile:
      - name: info
        ignoreExceptions: false
        fileName: ${sys:log.home}/${sys:log.file.name}/info.log
        filePattern: ${sys:log.home}/info/info-%d{yyyy-MM-dd-HH}-%i.log.gz
        Filters:
          ThresholdFilter:
            - level: error
              onMatch: DENY
              onMismatch: NEUTRAL
            - level: info
              onMatch: ACCEPT
              onMismatch: DENY
        PatternLayout:
          Pattern: "%d{yyyy.MM.dd HH:mm:ss.SSS} [%t] %-5level %logger{36} %L %M - %msg%xEx%n"
          Charset: "UTF-8"
        Policies:
          TimeBasedTriggeringPolicy:
            interval: 4
            modulate: true
          SizeBasedTriggeringPolicy:
            size: "30 MB"
        DefaultRolloverStrategy:
          max: 10
          DELETE:
            basePath: ${sys:log.home}
            maxDepth: "2"
            IfLastModified:
              age: "30d"
      - name: error
        ignoreExceptions: false
        fileName: ${sys:log.home}/${sys:log.file.name}/error.log
        filePattern: ${sys:log.home}/error/error-%d{yyyy-MM-dd-HH}-%i.log.gz
        ThresholdFilter:
          level: error
          onMatch: ACCEPT
          onMismatch: DENY
        PatternLayout:
          Pattern: "%d{yyyy.MM.dd HH:mm:ss.SSS} [%t] %-5level %logger{36} %L %M - %msg%xEx%n"
          Charset: "UTF-8"
        Policies:
          TimeBasedTriggeringPolicy:
            interval: 4
            modulate: true
          SizeBasedTriggeringPolicy:
            size: "30 MB"
        DefaultRolloverStrategy:
          max: 10
          DELETE:
            basePath: ${sys:log.home}
            maxDepth: "2"
            IfLastModified:
              age: "30d"
  Loggers:
    AsyncLogger:
      - name: org.springframework
        additivity: false
        level: info
        includeLocation: true
        AppenderRef:
          - ref: STDOUT
          - ref: info
          - ref: error
      - name: com.iot.phoebus
        additivity: false
        level: info
        includeLocation: true
        AppenderRef:
          - ref: STDOUT
          - ref: info
          - ref: error
    Root:
      level: info
      includeLocation: true
      AppenderRef:
        - ref: STDOUT
        - ref: info
        - ref: error
